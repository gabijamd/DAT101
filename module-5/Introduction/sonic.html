<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <title>Sonic Example</title>
    <style>
      .prevent-select {
        -webkit-user-select: none; /* Safari */
        -ms-user-select: none; /* IE 10 and IE 11 */
        user-select: none; /* Standard syntax */
      }
    </style>
  </head>
  <body class="prevent-select">
    <canvas id="cvs" style="background-color: rgb(203, 212, 194)" width="1024" height="512"></canvas>
  </body>
  <script defer>
    const cvs = document.getElementById("cvs");
    const ctx = cvs.getContext("2d"); 
    const sonicPath = "sonic_sprite_sheet.png"; 
    //./ punktum slash ( andre side) må brukes i andre tilfeller 

    const sonicSheet = new Image();
     // new er "snekker", den tilhører klasser og tilkaler bilde klasse og gjør om sonicSheet til en bilde

    const Sonic2 ={x:0, y: 127, width: 102, height: 121, count: 9};  //destination 
    let frameNumber = 0; 
    let posX =  0; 
    let hero = Sonic2; 

    function animate(){
      ctx.clearRect(0, 0, cvs.width, cvs.height); 
      const dx = 0, dy = 100, dw = Sonic2.width, dh= Sonic2.height; //destination ? 
      const sx = frameNumber * Sonic2.width + Sonic2.x , sy = Sonic2.y, sw = Sonic2.width, sh = Sonic2.height; 
      ctx.drawImage(sonicSheet, sx, sy, sw, sh, dx + posX, dy, dw, dh)

      if(posX < cvs.width - Sonic2.width ){
         frameNumber++;
         
         if(frameNumber >= Sonic2.count){
        frameNumber = 0;  
         }
        posX+= 10;
        console.log(posX); 
    } else {
      posX = cvs.width - Sonic2.width; 
    }
  }
    function sonicSheetLoaded(){
      console.log("Sonic sheet loaded"); 
      setInterval(animate, 50); 
    }
  

    sonicSheet.addEventListener("load", sonicSheetLoaded); // kjører funksjon når bilde er ferdig lastet, roper ikke etter funskjonen derfor bruker man ikke paranteser ved funksjonen, fordi man kaller/referer til for da den er ferdig gjort (?) 
    sonicSheet.src = sonicPath; 

  </script>
</html>